baidu.calcPageLoadTime=(function(){var b={};var c=function(){if(b.header&&b.time){a()}else{$.ajax({type:"GET",url:window.location.href,complete:function(g,f){b.header={date:g.getResponseHeader("Date"),contentEncoding:g.getResponseHeader("Content-Encoding"),connection:g.getResponseHeader("Connection"),contentLength:g.getResponseHeader("Content-Length"),server:g.getResponseHeader("Server"),vary:g.getResponseHeader("Vary"),transferEncoding:g.getResponseHeader("Transfer-Encoding"),contentType:g.getResponseHeader("Content-Type"),cacheControl:g.getResponseHeader("Cache-Control"),exprires:g.getResponseHeader("Exprires"),lastModified:g.getResponseHeader("Last-Modified")};e();a()}})}};var e=function(){b.time=performance.timing};var a=function(){chrome.extension.sendMessage({type:MSG_TYPE.CALC_PAGE_LOAD_TIME,wpo:b})};var d=function(){chrome.extension.onMessage.addListener(function(h,g,i){if(h.type==MSG_TYPE.GET_PAGE_WPO_INFO){(function f(){(document.readyState=="complete")?c():setTimeout(f,1000)})()}})};return{init:d}})();baidu.calcPageLoadTime.init();